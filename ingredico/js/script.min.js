var tabs=document.querySelector(".news__tabs"),topPanel=document.querySelector(".top-panel"),fixedBlock=document.querySelector(".fixed__menu_box"),news=document.querySelectorAll(".news__preview_item"),city=document.querySelectorAll(".city"),phone=document.querySelectorAll(".phone__number span"),menu=document.querySelectorAll(".menu__category li a"),greyMenu=document.querySelectorAll(".catalog-body__menu .menu__category li a"),menuButton=document.querySelector(".menu__dropdown"),overlayMenu=document.querySelector(".overlay__menu"),menuDropdown=document.querySelector(".menu__category"),popularProduct=document.querySelectorAll(".popular__item"),newsSlider=(news=document.querySelectorAll(".news__preview_item"),document.querySelector(".news__slider")),filterDropdown=document.querySelectorAll(".dropdown .small-title"),previewText=document.querySelectorAll(".news__preview_text");const textSlice=(e,t)=>{e.forEach(e=>{e.innerHTML.length>t&&(e.innerHTML=e.innerHTML.substr(0,t-1)+" ...")})},classToggle=e=>{e.classList.toggle("active")};for(let e of city)e.addEventListener("change",()=>{for(let t of phone)t.innerHTML=e.value});const activeSlider=(e,t)=>{e.length>4&&$(t).slick({infinite:!1,slidesToShow:4,slidesToScroll:1})};activeSlider(news,newsSlider),activeSlider(popularProduct,".popular__slider"),window.onload=()=>{menu.forEach(e=>{e.addEventListener("mouseenter",(function(t){t.preventDefault();let l=t.currentTarget.children[0].children[0].contentDocument;console.log(t.currentTarget.children[0].children[0]),l.querySelectorAll("path").forEach(l=>{let n=l.getAttribute("fill");l.setAttribute("fill","#ffffff"),t.currentTarget.style.backgroundColor=n,t.currentTarget.style.color="#ffffff",e.addEventListener("mouseleave",(function(e){l.setAttribute("fill",n),e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="var(--color-1)"}))})}))}),greyMenu.forEach(e=>{new Promise((t,l)=>{setTimeout(()=>{e.querySelector(".menu__category_img").children[0].contentDocument.querySelectorAll("path").forEach(e=>{const l=e.getAttribute("fill");e.setAttribute("fill","#D2D2D2"),t(l)})},5e3)}).then(t=>{e.addEventListener("mouseenter",(function(l){currentEl=l.currentTarget,currentEl.children[0].children[0].contentDocument.querySelectorAll("path").forEach(l=>{l.setAttribute("fill",t),currentEl.style.backgroundColor="transparent",currentEl.style.color=t,e.addEventListener("mouseleave",(function(e){l.setAttribute("fill","#D2D2D2"),currentEl.style.color="#000"}))})}))}).catch(e=>{console.log("Image not loading ... ")})})};const customSelect=(e,t)=>{for(x=document.getElementsByClassName(e),l=x.length,i=0;i<l;i++){for(selElmnt=x[i].getElementsByTagName("select")[0],ll=selElmnt.length,a=document.createElement("DIV"),a.setAttribute("class","select-selected"),a.innerHTML=selElmnt.options[selElmnt.selectedIndex].innerHTML,x[i].appendChild(a),b=document.createElement("DIV"),b.setAttribute("class","select-items select-hide"),j=t;j<ll;j++)c=document.createElement("DIV"),c.innerHTML=selElmnt.options[j].innerHTML,c.addEventListener("click",(function(e){var t,l,n,r,a,o,i;for(o=(r=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,a=this.parentNode.previousSibling,l=0;l<o;l++)if(r.options[l].innerHTML==this.innerHTML){for(r.selectedIndex=l,a.innerHTML=this.innerHTML,i=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,n=0;n<i;n++)t[n].removeAttribute("class");this.setAttribute("class","same-as-selected");break}a.click()})),b.appendChild(c);x[i].appendChild(b),a.addEventListener("click",(function(e){e.stopPropagation(),n(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")}))}function n(e){var t,l,n,r,a,o=[];for(t=document.getElementsByClassName("select-items"),l=document.getElementsByClassName("select-selected"),r=t.length,a=l.length,n=0;n<a;n++)e==l[n]?o.push(n):l[n].classList.remove("select-arrow-active");for(n=0;n<r;n++)o.indexOf(n)&&t[n].classList.add("select-hide")}document.addEventListener("click",n)};customSelect("select-sort",0),customSelect("quantity-to-cart",1);var selItems=document.querySelectorAll(".catalog-cards  .select-items");for(let e of selItems)e.onclick=function(e){let t=e.target.parentNode.parentNode,l=t.previousElementSibling.children,n=e.target.innerHTML.split(" - ");for(var r=0;r<n.length;r++)l[r].innerHTML=n[r];t.nextElementSibling.value=n[0],t.setAttribute("style","display: none;"),t.nextElementSibling.classList.add("active")};menuButton.addEventListener("click",(function(){classToggle(menuButton),classToggle(overlayMenu),classToggle(menuDropdown)})),null!==tabs&&tabs.addEventListener("click",e=>{$(newsSlider)[0].slick.refresh();let t=e.target.dataset.preview;console.log(t);for(let t=0;t<tabs.children.length;t++)tabs.children[t].classList.remove("active"),e.target.classList.add("active");news.forEach(e=>{e.classList.remove("active"),e.classList.add("disable"),e.dataset.preview!==t&&"all"!==t||(e.classList.remove("disable"),e.classList.add("active"))})}),textSlice(previewText,130);const fixedMenu=()=>{null!==fixedBlock&&(pageYOffset+100>fixedBlock.offsetHeight?(topPanel.classList.add("active"),topPanel.setAttribute("style","transform: translate(0px, 0px);")):pageYOffset<200?topPanel.removeAttribute("style","transform: translate(0px, 0px);"):pageYOffset+100<fixedBlock.offsetHeight&&(topPanel.classList.remove("active"),topPanel.setAttribute("style","transform: translate(0px, -200px);")))};if(fixedMenu(),window.addEventListener("scroll",(function(){fixedMenu()})),filterDropdown.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.toggle("active")})}),null!==document.querySelector(".price__slider")){var rangeRail=document.querySelector(".price__range_rail"),rangeTrack=document.querySelector(".price__range_track"),rangeHandleLeft=document.querySelector(".price__range_handle-1"),rangeHandleRight=document.querySelector(".price__range_handle-2"),inputMin=document.querySelector(".price__input_min"),inputMax=document.querySelector(".price__input_max"),valueMax=inputMax.getAttribute("aria-valuemax");rangeHandleLeft.setAttribute("style","left: "+inputMin.value/valueMax*100+"%;"),rangeHandleRight.setAttribute("style","left: "+inputMax.value/valueMax*100+"%;"),rangeHandleLeft.setAttribute("aria-valuenow",inputMin.value),rangeHandleRight.setAttribute("aria-valuenow",inputMax.value);const e=(e,t,l,n)=>{e.onmousedown=function(e){let r=e.currentTarget,a=Math.floor(rangeRail.getBoundingClientRect().width);document.onmousemove=function(e){e=e.pageX-Math.floor(rangeRail.getBoundingClientRect().x),r.style.left=e/(a/100)+"%",Math.floor(r.setAttribute("aria-valuenow",e/(a/100))),e>a?(r.style.left="100%",Math.floor(r.setAttribute("aria-valuenow",100))):e<=0&&(r.style.left="0%",Math.floor(r.setAttribute("aria-valuenow",0)));let o=t.getAttribute("aria-valuenow");l.setAttribute("value",Math.floor(inputMax.getAttribute("aria-valuemax")/100*o)),n==inputMax?o>n.value/valueMax*100-8&&(r.style.left=n.value/valueMax*100-8+"%",l.setAttribute("value",n.value)):n==inputMin&&o<n.value/valueMax*100+8&&(r.style.left=n.value/valueMax*100+8+"%",l.setAttribute("value",n.value))},document.onmouseup=function(){document.onmousemove=null}}};e(rangeHandleLeft,rangeHandleLeft,inputMin,inputMax),e(rangeHandleRight,rangeHandleRight,inputMax,inputMin)}